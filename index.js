var H=n=>{throw TypeError(n)};var K=(n,e,t)=>e.has(n)||H("Cannot "+t);var _=(n,e,t)=>(K(n,e,"read from private field"),t?t.call(n):e.get(n)),g=(n,e,t)=>e.has(n)?H("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();var f,p;class V{constructor(){g(this,f,"3vLlhLsn5MSlQI96Cy78HBPNhef1xnsS");g(this,p,"https://app.ticketmaster.com/discovery/v2/events.json");this.page=0,this.pageSize=12,this.searchQuery="",this.searchCountry=""}async fetchEvents(){const e=new URLSearchParams({apikey:_(this,f),page:this.page,size:this.pageSize,keyword:this.searchQuery,countryCode:this.searchCountry,sort:"random"}),t=`${_(this,p)}?${e}&classificationName=music`,c=await fetch(t);if(!c.ok)throw new Error("Failed to fetch events");return c.json()}}f=new WeakMap,p=new WeakMap;fetch("https://app.ticketmaster.com/discovery/v2/events.json?apikey=3vLlhLsn5MSlQI96Cy78HBPNhef1xnsS");function Y(n){return n.map(t=>{var s,l;const c=((s=t.images[0])==null?void 0:s.url)||"",o=t.name||"No name available",i=t.dates.start.localDate||"Unknown date",r=((l=t._embedded)==null?void 0:l.venues[0].name)||"Unknown location",a=t.url||"#";return`
        <li class="cards__item" data-id="${t.id}">
                <img src="${c}" alt="${o}" class="cards__item__img">
                <h2 class="cards__item__title">
                    ${o}
                </h2>
                <p class="cards__item__date">${i}</p>
                <a href="${a}" class="cards__item__location__link">
                   <svg xmlns="http://www.w3.org/2000/svg" width="6" height="9" viewBox="0 0 6 9" fill="none">
  <path d="M3 0C1.34581 0 0 1.40339 0 3.12836C0 5.29645 3.00295 9 3.00295 9C3.00295 9 6 5.18983 6 3.12836C6 1.40339 4.65424 0 3 0ZM3.90516 4.04434C3.65558 4.30455 3.32781 4.43469 3 4.43469C2.67224 4.43469 2.34437 4.30455 2.09489 4.04434C1.59577 3.52392 1.59577 2.67709 2.09489 2.15662C2.33658 1.90448 2.65807 1.76561 3 1.76561C3.34193 1.76561 3.66337 1.90453 3.90516 2.15662C4.40428 2.67709 4.40428 3.52392 3.90516 4.04434Z" fill="white"/>
</svg>
                   ${r} </a>
            </li>
      `}).join("")}function Z(n,e,t){const c=document.querySelector(".pagination__list");c.innerHTML="";const i=Q(n,e).map(a=>a==="..."?`<li class="pagination__list__item">
                <span class="pagination__dots">...</span>
            </li>`:` <li class="pagination__list__item">
                <button class="pagination__list__button ${a===e?"active":""}" data-page="${a}">${a+1}</button>
            </li>`).join("");c.insertAdjacentHTML("beforeend",i),c.addEventListener("click",r);function r(a){if(a.target.tagName!=="BUTTON")return;const s=Number(a.target.dataset.page);s!==e&&t(s)}}function Q(n,e){const t=[];if(n<=5)for(let o=0;o<n;o++)t.push(o);else{e>1&&t.push(0),e>2&&t.push("...");const o=Math.max(0,e-1),i=Math.min(n,e+2);for(let r=o;r<i;r++)t.push(r);e<n-3&&t.push("..."),e<n-1&&t.push(n-1)}return t}const D=[{en:"Choose country",code:""},{en:"United States Of America",code:"US"},{en:"Andorra",code:"AD"},{en:"Anguilla",code:"AI"},{en:"Argentina",code:"AR"},{en:"Australia",code:"AU"},{en:"Austria",code:"AT"},{en:"Azerbaijan",code:"AZ"},{en:"Bahamas",code:"BS"},{en:"Bahrain",code:"BH"},{en:"Barbados",code:"BB"},{en:"Belgium",code:"BE"},{en:"Bermuda",code:"BM"},{en:"Brazil",code:"BR"},{en:"Bulgaria",code:"BG"},{en:"Canada",code:"CA"},{en:"Chile",code:"CL"},{en:"China",code:"CN"},{en:"Colombia",code:"CO"},{en:"Costa Rica",code:"CR"},{en:"Croatia",code:"HR"},{en:"Cyprus",code:"CY"},{en:"Czech Republic",code:"CZ"},{en:"Denmark",code:"DK"},{en:"Dominican Republic",code:"DO"},{en:"Ecuador",code:"EC"},{en:"Estonia",code:"EE"},{en:"Faroe Islands",code:"FO"},{en:"Finland",code:"FI"},{en:"France",code:"FR"},{en:"Georgia",code:"GE"},{en:"Germany",code:"DE"},{en:"Ghana",code:"GH"},{en:"Gibraltar",code:"GI"},{en:"Great Britain",code:"GB"},{en:"Greece",code:"GR"},{en:"Hong Kong",code:"HK"},{en:"Hungary",code:"HU"},{en:"Iceland",code:"IS"},{en:"India",code:"IN"},{en:"Ireland",code:"IE"},{en:"Israel",code:"IL"},{en:"Italy",code:"IT"},{en:"Jamaica",code:"JM"},{en:"Japan",code:"JP"},{en:"Korea, Republic of",code:"KR"},{en:"Latvia",code:"LV"},{en:"Lebanon",code:"LB"},{en:"Lithuania",code:"LT"},{en:"Luxembourg",code:"LU"},{en:"Malaysia",code:"MY"},{en:"Malta",code:"MT"},{en:"Mexico",code:"MX"},{en:"Monaco",code:"MC"},{en:"Montenegro",code:"ME"},{en:"Morocco",code:"MA"},{en:"Netherlands",code:"NL"},{en:"Netherlands Antilles",code:"AN"},{en:"New Zealand",code:"NZ"},{en:"Northern Ireland",code:"ND"},{en:"Norway",code:"NO"},{en:"Peru",code:"PE"},{en:"Poland",code:"PL"},{en:"Portugal",code:"PT"},{en:"Romania",code:"RO"},{en:"Russian Federation",code:"RU"},{en:"Saint Lucia",code:"LC"},{en:"Saudi Arabia",code:"SA"},{en:"Serbia",code:"RS"},{en:"Singapore",code:"SG"},{en:"Slovakia",code:"SK"},{en:"Slovenia",code:"SI"},{en:"South Africa",code:"ZA"},{en:"Spain",code:"ES"},{en:"Sweden",code:"SE"},{en:"Switzerland",code:"CH"},{en:"Taiwan",code:"TW"},{en:"Thailand",code:"TH"},{en:"Trinidad and Tobago",code:"TT"},{en:"Turkey",code:"TR"},{en:"Ukraine",code:"UA"},{en:"United Arab Emirates",code:"AE"},{en:"Uruguay",code:"UY"},{en:"Venezuela",code:"VE"}],J=document.getElementById("header__form__country__select");document.querySelector(".header__form__country__button-text");const W=D.map(n=>`
        <option class='header__form__country__option' value="${n.en}">${n.en}</option>
    `).join("");J.insertAdjacentHTML("beforeend",W);function X(n){return D.find(e=>e.en===n).code}const R=document.querySelector(".cards__list"),ee=document.querySelector(".pagination__list"),ne=document.getElementById("header__form"),te=document.getElementById("search-input"),oe=document.getElementById("header__form__country__select"),ce=document.querySelector(".header__form__country__button-text"),ie=document.querySelector(".cards__list"),O=document.querySelector(".cards__empty-text"),d=new V;y();function ae(){document.querySelectorAll(".cards__item").forEach(e=>{e.addEventListener("click",t=>{const o=t.target.getAttribute("data-id");o&&onCardClick(o)},{capture:!0})})}ne.addEventListener("submit",se);oe.addEventListener("change",re);async function re(n){n.preventDefault();const e=n.target.value;ce.textContent=e,d.searchCountry=X(n.target.value),d.page=0,v(),F(),E(),await y()}async function se(n){n.preventDefault(),d.searchQuery=te.value.trim(),d.page=0,v(),F(),E(),await y()}async function y(){var n;try{const e=await d.fetchEvents(),t=((n=e._embedded)==null?void 0:n.events)||le();window.events=t;const c=Y(t);R.insertAdjacentHTML("beforeend",c),ae();const o=e.page.totalPages;console.log("Total Pages:",o,"Current Page:",d.page),Z(o,d.page,de)}catch(e){console.error(e)}}function v(){R.innerHTML=""}function de(n){n!==d.page&&(d.page=n,v(),E(),y())}function F(){ee.innerHTML=""}function le(){ie.innerHTML="",O.style.display="flex"}function E(){O.style.display="none"}const ue="No additional info provided :(";function me(n){var C,k,B,w,T,I,b,S,A,M,U,x,$,N,P;if(!window.events){console.error("No info found");return}const e=window.events.find(m=>m.id===n);if(!e){console.error("No info found",n);return}const t=((B=(k=(C=e._embedded)==null?void 0:C.venues)==null?void 0:k[0])==null?void 0:B.name)||"Unknown location",c=e.dates.timezone||"Unknown timezone",o=((T=(w=e._embedded.venues)==null?void 0:w[0])==null?void 0:T.city.name)||"Unknown city",i=((b=(I=e._embedded.attractions)==null?void 0:I[0])==null?void 0:b.name)||"Unknown artist",r=((A=(S=e._embedded.venues)==null?void 0:S[0])==null?void 0:A.url)||"Unknown href",a=e==null?void 0:e.priceRanges,s=a==null?void 0:a.find(m=>m.type==="standard"),l=a==null?void 0:a.find(m=>m.type==="vip"),u=((U=(M=e._embedded.attractions)==null?void 0:M[0])==null?void 0:U.url)||"Unknown more information",h=(($=(x=e.images)==null?void 0:x[2])==null?void 0:$.url)||"Unknown image",G=((P=(N=e.images)==null?void 0:N[0])==null?void 0:P.url)||"Unknown image";fe(e.info),pe(e.dates.start,c),ye(o,t),he(i);const q=_e(r);ge(s,l,s==null?void 0:s.currency);const j=ve(u);Ee(h,G);const L=document.getElementById("backdrop-window");L.style.display="flex",L.classList.add("show");const z=document.querySelector(".modal");setTimeout(()=>z.classList.add("open"),10),Le(q,j)}function fe(n=ue){const e=document.getElementById("text-information");n.length>=132?e.innerText=(n==null?void 0:n.slice(0,132))+"...":e.innerText=n}function pe(n,e){const t=document.getElementById("event-date"),c=document.getElementById("event-time"),o=r(n.localDate),i=a(n.localTime);t.textContent=o,c.textContent=`${i} (${e.replace("_"," ")})`;function r(s){const[l,u,h]=s.split("-");return`${l}-${u}-${h}`}function a(s){const[l,u]=s.split(":");return`${l}:${u}`}}function ye(n,e){const t=document.getElementById("event-city"),c=document.getElementById("event-place");t.innerText=n,c.innerText=e}function he(n){const e=document.getElementById("event-performer");e.innerText=n}function _e(n){const e=document.getElementById("event-ticket"),t=document.getElementById("event-ticket-vip");e.href=n,t.href=n,e.addEventListener("click",c),t.addEventListener("click",c);function c(){window.open(n,"_blank").focus()}return()=>{e.removeEventListener("click",c),t.removeEventListener("click",c)}}function ge(n,e,t){const c=document.getElementById("standart-price"),o=document.getElementById("standart-ticket"),i=document.getElementById("vip-ticket"),r=document.getElementById("vip-price"),a=document.getElementById("event-ticket-vip");n&&(o.style.display="flex",c.innerText=`Standart ${n.min} - ${n.max} ${t}`),e&&(r.style.display="flex",a.style.display="flex",i.innerText=`Vip ${e.min} - ${e.max} ${t}`)}function ve(n){const e=document.getElementById("event-more");e.addEventListener("click",t);function t(){window.open(n,"_blank").focus()}return()=>e.removeEventListener("click",t)}function Ee(n,e){const t=document.getElementById("img-circle"),c=document.getElementById("main-img");t.setAttribute("src",n),c.setAttribute("src",e)}window.onCardClick=me;function Le(n,e){const t=document.getElementById("backdrop-window"),c=document.getElementById("close"),o=document.querySelector(".modal");function i(){o.classList.remove("open"),o.classList.add("close"),setTimeout(()=>{t.style.display="none",o.classList.remove("close")},800),n(),e()}c.addEventListener("click",i,{capture:!0}),t.addEventListener("click",r=>{r.target===t&&i()},{capture:!0})}
//# sourceMappingURL=index.js.map
