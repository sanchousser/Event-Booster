var v=t=>{throw TypeError(t)};var b=(t,e,n)=>e.has(t)||v("Cannot "+n);var y=(t,e,n)=>(b(t,e,"read from private field"),n?n.call(t):e.get(t)),h=(t,e,n)=>e.has(t)?v("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();var f,_;class B{constructor(){h(this,f,"3vLlhLsn5MSlQI96Cy78HBPNhef1xnsS");h(this,_,"https://app.ticketmaster.com/discovery/v2/events.json");this.page=0,this.pageSize=12,this.searchQuery="",this.country=""}async fetchEvents(){const e=new URLSearchParams({apikey:y(this,f),page:this.page,size:this.pageSize,keyword:this.searchQuery}),n=`${y(this,_)}?${e}&classificationName=music`,o=await fetch(n);if(!o.ok)throw new Error("Failed to fetch events");return o.json()}}f=new WeakMap,_=new WeakMap;function w(t){return t.map(n=>{var r,d;const o=((r=n.images[0])==null?void 0:r.url)||"",i=n.name||"No name available",c=n.dates.start.localDate||"Unknown date",s=((d=n._embedded)==null?void 0:d.venues[0].name)||"Unknown location",a=n.url||"#";return`
        <li class="cards__item" data-id="${n.id}">
                <img src="${o}" alt="${i}" class="cards__item__img">
                <h2 class="cards__item__title">
                    ${i}
                </h2>
                <p class="cards__item__date">${c}</p>
                <a href="${a}" class="cards__item__location__link">
                    <svg class="location__item__icon">
                        <use href="../img/icons/sprite.svg#icon-location"> </use>
                    </svg>

                   ${s} </a>
            </li>
      `}).join("")}function I(t,e,n){const o=document.querySelector(".pagination__list");o.innerHTML="";const c=T(t,e).map(a=>a==="..."?`<li class="pagination__list__item">
                <span class="pagination__dots">...</span>
            </li>`:` <li class="pagination__list__item">
                <button class="pagination__list__button ${a===e?"active":""}" data-page="${a}">${a+1}</button>
            </li>`).join("");o.insertAdjacentHTML("beforeend",c),o.addEventListener("click",s);function s(a){if(a.target.tagName!=="BUTTON")return;const r=Number(a.target.dataset.page);r!==e&&n(r)}}function T(t,e){const n=[];if(t<=5)for(let i=0;i<t;i++)n.push(i);else{e>1&&n.push(0),e>2&&n.push("...");const i=Math.max(0,e-1),c=Math.min(t,e+2);for(let s=i;s<c;s++)n.push(s);e<t-3&&n.push("..."),e<t-1&&n.push(t-1)}return n}const E=document.querySelector(".cards__list"),$=document.querySelector(".pagination__list"),C=document.getElementById("header__form"),S=document.getElementById("search-input"),l=new B;g();function x(){document.querySelectorAll(".cards__item").forEach(e=>{e.addEventListener("click",n=>{const i=n.target.getAttribute("data-id");i&&onCardClick(i)},{capture:!0})})}C.addEventListener("submit",M);async function M(t){t.preventDefault(),l.searchQuery=S.value.trim(),l.page=0,k(),A(),await g()}async function g(){var t;try{const e=await l.fetchEvents(),n=((t=e._embedded)==null?void 0:t.events)||[],o=w(n);x(),E.insertAdjacentHTML("beforeend",o);const i=e.page.totalPages;console.log("Total Pages:",i,"Current Page:",l.page),I(i,l.page,U)}catch(e){console.error(e)}}function k(){E.innerHTML=""}function U(t){t!==l.page&&(l.page=t,k(),g())}function A(){$.innerHTML=""}const N=[{en:"Austria"},{en:"Belgium"},{en:"Bosnia and Herzegovina"},{en:"United Kingdom"},{en:"Hungary"},{en:"Germany"},{en:"Georgia"},{en:"Denmark"},{en:"Ireland"},{en:"Spain"},{en:"Italy"},{en:"Canada"},{en:"Latvia"},{en:"Lithuania"},{en:"Netherlands"},{en:"Norway"},{en:"Poland"},{en:"Portugal"},{en:"South Korea"},{en:"Romania"},{en:"Serbia"},{en:"Slovakia"},{en:"Slovenia"},{en:"United States"},{en:"Finland"},{en:"France"},{en:"Croatia"},{en:"Czech Republic"},{en:"Switzerland"},{en:"Sweden"},{en:"Estonia"},{en:"South Africa"},{en:"Japan"}],L=document.getElementById("header__form__country__select"),P=document.querySelector(".header__form__country__button-text"),D=N.map(t=>`
        <option class='header__form__country__option' value="${t.en}">${t.en}</option>
    `).join("");L.insertAdjacentHTML("beforeend",D);L.addEventListener("change",H);function H(t){const e=t.target.value;P.textContent=e}const j="No additional info provided :(";function F(t){var p;const e=window.events.find(m=>m.id===t),n=((p=e._embedded)==null?void 0:p.venues[0].name)||"Unknown location",o=e.dates.timezone,i=e._embedded.venues[0].city.name||"Unknown city",c=e._embedded.attractions[0].name,s=e._embedded.venues[0].url,a=e==null?void 0:e.priceRanges,r=a==null?void 0:a.find(m=>m.type==="standard"),d=a==null?void 0:a.find(m=>m.type==="vip");O(e.info),z(e.dates.start,o),q(i,n),K(c),V(s),Y(r,d,r==null?void 0:r.currency);const u=document.getElementById("backdrop-window");u.style.display="flex"}function O(t=j){const e=document.getElementById("text-information");t.length>=132?e.innerText=(t==null?void 0:t.slice(0,132))+"...":e.innerText=t}function z(t,e){const n=document.getElementById("event-date"),o=document.getElementById("event-time"),i=s(t.localDate),c=a(t.localTime);n.textContent=i,o.textContent=`${c} (${e.replace("_"," ")})`;function s(r){const[d,u,p]=r.split("-");return`${d}-${u}-${p}`}function a(r){const[d,u]=r.split(":");return`${d}:${u}`}}function q(t,e){const n=document.getElementById("event-city"),o=document.getElementById("event-place");n.innerText=t,o.innerText=e}function K(t){const e=document.getElementById("event-performer");e.innerText=t}function V(t){const e=document.getElementById("event-ticket"),n=document.getElementById("event-ticket-vip");e.href=t,n.href=t,e.addEventListener("click",o),n.addEventListener("click",o);function o(){window.open(t,"_blank").focus()}}function Y(t,e,n){const o=document.getElementById("standart-price"),i=document.getElementById("standart-ticket"),c=document.getElementById("vip-ticket"),s=document.getElementById("vip-price"),a=document.getElementById("event-ticket-vip");t&&(i.style.display="flex",o.innerText=`Standart ${t.min} - ${t.max} ${n}`),e&&(s.style.display="flex",a.style.display="flex",c.innerText=`Vip ${e.min} - ${e.max} ${n}`)}window.onCardClick=F;function Q(){const t=document.getElementById("backdrop-window"),e=document.getElementById("close");e.addEventListener("click",n,{capture:!0}),t.addEventListener("click",n,{capture:!0});function n(o){const i=document.getElementById("backdrop-window");(o.target==e||o.target==t||e.contains(o.target))&&(i.style.display="none")}}Q();
//# sourceMappingURL=index.js.map
