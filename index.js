var L=n=>{throw TypeError(n)};var w=(n,e,t)=>e.has(n)||L("Cannot "+t);var _=(n,e,t)=>(w(n,e,"read from private field"),t?t.call(n):e.get(n)),g=(n,e,t)=>e.has(n)?L("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();var p,f;class M{constructor(){g(this,p,"3vLlhLsn5MSlQI96Cy78HBPNhef1xnsS");g(this,f,"https://app.ticketmaster.com/discovery/v2/events.json");this.page=0,this.pageSize=12,this.searchQuery="",this.searchCountry=""}async fetchEvents(){const e=new URLSearchParams({apikey:_(this,p),page:this.page,size:this.pageSize,keyword:this.searchQuery,countryCode:this.searchCountry,sort:"random"}),t=`${_(this,f)}?${e}&classificationName=music`,c=await fetch(t);if(!c.ok)throw new Error("Failed to fetch events");return c.json()}}p=new WeakMap,f=new WeakMap;fetch("https://app.ticketmaster.com/discovery/v2/events.json?apikey=3vLlhLsn5MSlQI96Cy78HBPNhef1xnsS");function U(n){return n.map(t=>{var s,l;const c=((s=t.images[0])==null?void 0:s.url)||"",o=t.name||"No name available",i=t.dates.start.localDate||"Unknown date",r=((l=t._embedded)==null?void 0:l.venues[0].name)||"Unknown location",a=t.url||"#";return`
        <li class="cards__item" data-id="${t.id}">
                <img src="${c}" alt="${o}" class="cards__item__img">
                <h2 class="cards__item__title">
                    ${o}
                </h2>
                <p class="cards__item__date">${i}</p>
                <a href="${a}" class="cards__item__location__link">
                    <svg class="location__item__icon">
                        <use href="../img/icons/sprite.svg#icon-location"> </use>
                    </svg>

                   ${r} </a>
            </li>
      `}).join("")}function $(n,e,t){const c=document.querySelector(".pagination__list");c.innerHTML="";const i=N(n,e).map(a=>a==="..."?`<li class="pagination__list__item">
                <span class="pagination__dots">...</span>
            </li>`:` <li class="pagination__list__item">
                <button class="pagination__list__button ${a===e?"active":""}" data-page="${a}">${a+1}</button>
            </li>`).join("");c.insertAdjacentHTML("beforeend",i),c.addEventListener("click",r);function r(a){if(a.target.tagName!=="BUTTON")return;const s=Number(a.target.dataset.page);s!==e&&t(s)}}function N(n,e){const t=[];if(n<=5)for(let o=0;o<n;o++)t.push(o);else{e>1&&t.push(0),e>2&&t.push("...");const o=Math.max(0,e-1),i=Math.min(n,e+2);for(let r=o;r<i;r++)t.push(r);e<n-3&&t.push("..."),e<n-1&&t.push(n-1)}return t}const k=[{en:"Choose country",code:""},{en:"United States Of America",code:"US"},{en:"Andorra",code:"AD"},{en:"Anguilla",code:"AI"},{en:"Argentina",code:"AR"},{en:"Australia",code:"AU"},{en:"Austria",code:"AT"},{en:"Azerbaijan",code:"AZ"},{en:"Bahamas",code:"BS"},{en:"Bahrain",code:"BH"},{en:"Barbados",code:"BB"},{en:"Belgium",code:"BE"},{en:"Bermuda",code:"BM"},{en:"Brazil",code:"BR"},{en:"Bulgaria",code:"BG"},{en:"Canada",code:"CA"},{en:"Chile",code:"CL"},{en:"China",code:"CN"},{en:"Colombia",code:"CO"},{en:"Costa Rica",code:"CR"},{en:"Croatia",code:"HR"},{en:"Cyprus",code:"CY"},{en:"Czech Republic",code:"CZ"},{en:"Denmark",code:"DK"},{en:"Dominican Republic",code:"DO"},{en:"Ecuador",code:"EC"},{en:"Estonia",code:"EE"},{en:"Faroe Islands",code:"FO"},{en:"Finland",code:"FI"},{en:"France",code:"FR"},{en:"Georgia",code:"GE"},{en:"Germany",code:"DE"},{en:"Ghana",code:"GH"},{en:"Gibraltar",code:"GI"},{en:"Great Britain",code:"GB"},{en:"Greece",code:"GR"},{en:"Hong Kong",code:"HK"},{en:"Hungary",code:"HU"},{en:"Iceland",code:"IS"},{en:"India",code:"IN"},{en:"Ireland",code:"IE"},{en:"Israel",code:"IL"},{en:"Italy",code:"IT"},{en:"Jamaica",code:"JM"},{en:"Japan",code:"JP"},{en:"Korea, Republic of",code:"KR"},{en:"Latvia",code:"LV"},{en:"Lebanon",code:"LB"},{en:"Lithuania",code:"LT"},{en:"Luxembourg",code:"LU"},{en:"Malaysia",code:"MY"},{en:"Malta",code:"MT"},{en:"Mexico",code:"MX"},{en:"Monaco",code:"MC"},{en:"Montenegro",code:"ME"},{en:"Morocco",code:"MA"},{en:"Netherlands",code:"NL"},{en:"Netherlands Antilles",code:"AN"},{en:"New Zealand",code:"NZ"},{en:"Northern Ireland",code:"ND"},{en:"Norway",code:"NO"},{en:"Peru",code:"PE"},{en:"Poland",code:"PL"},{en:"Portugal",code:"PT"},{en:"Romania",code:"RO"},{en:"Russian Federation",code:"RU"},{en:"Saint Lucia",code:"LC"},{en:"Saudi Arabia",code:"SA"},{en:"Serbia",code:"RS"},{en:"Singapore",code:"SG"},{en:"Slovakia",code:"SK"},{en:"Slovenia",code:"SI"},{en:"South Africa",code:"ZA"},{en:"Spain",code:"ES"},{en:"Sweden",code:"SE"},{en:"Switzerland",code:"CH"},{en:"Taiwan",code:"TW"},{en:"Thailand",code:"TH"},{en:"Trinidad and Tobago",code:"TT"},{en:"Turkey",code:"TR"},{en:"Ukraine",code:"UA"},{en:"United Arab Emirates",code:"AE"},{en:"Uruguay",code:"UY"},{en:"Venezuela",code:"VE"}],x=document.getElementById("header__form__country__select");document.querySelector(".header__form__country__button-text");const P=k.map(n=>`
        <option class='header__form__country__option' value="${n.en}">${n.en}</option>
    `).join("");x.insertAdjacentHTML("beforeend",P);function H(n){return k.find(e=>e.en===n).code}const B=document.querySelector(".cards__list"),D=document.querySelector(".pagination__list"),R=document.getElementById("header__form"),O=document.getElementById("search-input"),F=document.getElementById("header__form__country__select"),G=document.querySelector(".header__form__country__button-text"),d=new M;y();function j(){document.querySelectorAll(".cards__item").forEach(e=>{e.addEventListener("click",t=>{const o=t.target.getAttribute("data-id");o&&onCardClick(o)},{capture:!0})})}R.addEventListener("submit",q);F.addEventListener("change",z);async function z(n){n.preventDefault();const e=n.target.value;G.textContent=e,d.searchCountry=H(n.target.value),d.page=0,v(),C(),await y()}async function q(n){n.preventDefault(),d.searchQuery=O.value.trim(),d.page=0,v(),C(),await y()}async function y(){var n;try{const e=await d.fetchEvents(),t=((n=e._embedded)==null?void 0:n.events)||[],c=U(t);j(),B.insertAdjacentHTML("beforeend",c);const o=e.page.totalPages;console.log("Total Pages:",o,"Current Page:",d.page),$(o,d.page,K)}catch(e){console.error(e)}}function v(){B.innerHTML=""}function K(n){n!==d.page&&(d.page=n,v(),y())}function C(){D.innerHTML=""}const V="No additional info provided :(";function Y(n){var E;const e=window.events.find(m=>m.id===n),t=((E=e._embedded)==null?void 0:E.venues[0].name)||"Unknown location",c=e.dates.timezone||"Unknown timezone",o=e._embedded.venues[0].city.name||"Unknown city",i=e._embedded.attractions[0].name||"Unknown artist",r=e._embedded.venues[0].url||"Unknown href",a=e==null?void 0:e.priceRanges,s=a==null?void 0:a.find(m=>m.type==="standard"),l=a==null?void 0:a.find(m=>m.type==="vip"),u=e._embedded.attractions[0].url||"Unknown more information",h=e.images[2].url||"Unknown image",I=e.images[0].url||"Unknown image";Z(e.info),Q(e.dates.start,c),J(o,t),W(i);const b=X(r);ee(s,l,s==null?void 0:s.currency);const T=ne(u);te(h,I);const S=document.getElementById("backdrop-window");S.style.display="flex";const A=document.querySelector(".modal");setTimeout(()=>A.classList.add("open"),10),oe(b,T)}function Z(n=V){const e=document.getElementById("text-information");n.length>=132?e.innerText=(n==null?void 0:n.slice(0,132))+"...":e.innerText=n}function Q(n,e){const t=document.getElementById("event-date"),c=document.getElementById("event-time"),o=r(n.localDate),i=a(n.localTime);t.textContent=o,c.textContent=`${i} (${e.replace("_"," ")})`;function r(s){const[l,u,h]=s.split("-");return`${l}-${u}-${h}`}function a(s){const[l,u]=s.split(":");return`${l}:${u}`}}function J(n,e){const t=document.getElementById("event-city"),c=document.getElementById("event-place");t.innerText=n,c.innerText=e}function W(n){const e=document.getElementById("event-performer");e.innerText=n}function X(n){const e=document.getElementById("event-ticket"),t=document.getElementById("event-ticket-vip");e.href=n,t.href=n,e.addEventListener("click",c),t.addEventListener("click",c);function c(){window.open(n,"_blank").focus()}return()=>{e.removeEventListener("click",c),t.removeEventListener("click",c)}}function ee(n,e,t){const c=document.getElementById("standart-price"),o=document.getElementById("standart-ticket"),i=document.getElementById("vip-ticket"),r=document.getElementById("vip-price"),a=document.getElementById("event-ticket-vip");n&&(o.style.display="flex",c.innerText=`Standart ${n.min} - ${n.max} ${t}`),e&&(r.style.display="flex",a.style.display="flex",i.innerText=`Vip ${e.min} - ${e.max} ${t}`)}function ne(n){const e=document.getElementById("event-more");e.addEventListener("click",t);function t(){window.open(n,"_blank").focus()}return()=>e.removeEventListener("click",t)}function te(n,e){const t=document.getElementById("img-circle"),c=document.getElementById("main-img");t.setAttribute("src",n),c.setAttribute("src",e)}window.onCardClick=Y;function oe(n,e){const t=document.getElementById("backdrop-window"),c=document.getElementById("close"),o=document.querySelector(".modal");function i(){o.classList.remove("open"),o.classList.add("close"),setTimeout(()=>{t.style.display="none",o.classList.remove("close")},800),n(),e()}c.addEventListener("click",i,{capture:!0}),t.addEventListener("click",r=>{r.target===t&&i()},{capture:!0})}
//# sourceMappingURL=index.js.map
